package com.app.daos;

import java.util.Optional;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Modifying;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;

import com.app.entities.User;

public interface IUserDao extends JpaRepository<User, Long>{
    Optional<User> findByEmailAndPassword(String email,String password);
    
    boolean existsByEmail(String email);
    
  //updating employees details
  	@Modifying
  	@Query(value = "update users u "
  			+ "inner join employees e on e.user_id =u.id "
  			+ "set u.first_name = :firstName,u.last_name=:lastName ,e.dob=:dob,u.cell_no=:cellNo where u.id=:userId ",nativeQuery = true)
  	int updateFirstNameLastNameDobCellNo(@Param("firstName")String firstName,@Param("lastName") String lastName,@Param("dob") Date dob,@Param("cellNo") String cellNo,@Param("userId") int userId);
  
    
	

}
